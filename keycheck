local function blacklistcheck()
    local blackLIST = loadstring(game:HttpGet("https://raw.githubusercontent.com/IRSILVER/loadstring/main/blacklist"))()
    local lookfor = blackLIST[game.Players.LocalPlayer.UserId]
    if lookfor then
        game.Players.LocalPlayer:Kick("You have been blacklisted from NTO's loadstring, Reason: " .. lookfor)
    end
end

blacklistcheck()


local keylistString = game:HttpGet("https://raw.githubusercontent.com/IRSILVER/loadstring/main/keylist.lua")
local keylist = loadstring(keylistString)()

local dailyk = keylist.daily
local premiumkeys = keylist.premium

local whitelistString = game:HttpGet("https://raw.githubusercontent.com/IRSILVER/loadstring/main/whitelists")
local whitelist = loadstring(whitelistString)()

local function done()
    local url = "https://github.com/IRSILVER/loadstring/blob/main/success"
    loadstring(game:HttpGet(url))()
end

local function sendnoti(desc, tijd)
    game.StarterGui:SetCore("SendNotification", {
        Title = "NTO'S LOADSTRING",
        Text = desc,
        Duration = tijd,
    })
end

blacklistcheck()

if _G.key then
    local loweredk = string.lower(_G.key)
    
    if loweredk == dailyk then
        sendnoti("Correct Key Loading Script...", 4)
        done()
    else
        local isPremiumKey = false
        for _, key in ipairs(premiumkeys) do
            if loweredk == key then
                isPremiumKey = true
                break
            end
        end
        
        if isPremiumKey then
            local player = game.Players.LocalPlayer
            local associatedKey = whitelist[player.UserId]
            if associatedKey and associatedKey == loweredk then
                sendnoti("Correct Key Loading Script...", 4)
                done()
            else
                player:Kick("Your user id is not whitelisted with the used premium key, sharing your key could get you blacklisted!")
            end
        else
            sendnoti("Incorrect Key, Get The Correct Key From The Discord.", 5)
        end
    end
else
    sendnoti("_G.key returned nil, Please enter a key or try rejoining.", 10)
end
